version: "3"
services:
  reverseproxy:
    build:
      dockerfile: Dockerfile
      context: ./nginx
    ports:
      - 80:8080
    networks:
      - mynetwork
    restart: always

  frontend:
    build:
      dockerfile: Dockerfile
      context: ./Frontend
      args:
       - SERVER_PORT=80
       - SERVER_CONNECTION=http
    depends_on:
      - backend
    networks:
      - mynetwork

  backend:
    build:
      dockerfile: Dockerfile
      context: ./Backend
    networks:
      - mynetwork
    environment:
      AWS_GIT_TOKEN: $AWS_GIT_TOKEN

networks:
  mynetwork: